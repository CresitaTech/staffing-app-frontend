<div class="card shadow-sm p-0 monthly-trand-table">
    <div class="card-header">
        <div class="row">
            <div class="col">
                <h5 class="card-title mb-0">{{title}} </h5>
            </div>
            <!-- <div class="form-check candidate-added-checkbox">
                <input #candidateAddedCheckbox type="checkbox" class="form-check-input" id="candidateAddedCheckbox"
                    [checked]="isCandidateAdded" (change)="onCandidateaddedSelect(candidateAddedCheckbox.checked)">
                <label class="form-check-label">Candidate Added</label>
            </div> -->
            <div class="col-auto ml-auto mobile">
                <div class="form-row">
                    <!-- <div class="col-auto"
                        *ngIf="(role === roles.ADMIN || role === roles.RECRUITER || role === roles.BDMMANAGER || role === roles.RECRUITERMANAGER )">
                        <select class="form-control form-control-sm" aria-label="Default select example" name="select"
                            [ngModel]="xAxisFilter" (ngModelChange)="filterRecruiterRS($event, xAxisFilterCountry); xAxisFilter = $event; filterOnTableRS($event, xAxisFilterCountry);">
                            <option selected value="none">Select Recruiter</option>
                            <option value="ALL">ALL</option>
                            <option *ngFor="let r of setForJobSummary;" [ngValue]="r">{{r}}</option>
                        </select>
                    </div> -->

                    <app-filter-search-dropdown [item]="xAxisFilter" [user_role]="'3'" [role]="'Recruiter'" (changeItemAllData)="allUsers=$event"
                    (changeItemEvt)="onXAxisFilterChange($event)" name="FilterSearch">
                </app-filter-search-dropdown>

                    <!-- <div class="col-auto">
                        <select class="form-control form-control-sm" aria-label="Default select example" name="select"
                            [ngModel]="xAxisFilterCountry"
                            (ngModelChange)=" xAxisFilterCountry = $event;filterOnTableRS(xAxisFilter, $event); filterRecruiterRS(xAxisFilter, $event);">
                            <option selected value="none">Select Country</option>
                            <option value="ALL">ALL</option>
                            <option *ngFor="let r of setForJobSummaryCountry;" [ngValue]="r">{{r}}</option>
                        </select>

                    </div> -->


                    <app-filter-search-dropdown [item]="xAxisFilterCountry" [user_role]="'Country'" [role]="'Country'"
                    (changeItemEvt)="onXAxisFilterCountryChange($event)" name="FilterSearch">
                </app-filter-search-dropdown>

                    <!-- <div class="col-auto"
                        *ngIf="(role === roles.ADMIN || role === roles.RECRUITER || role === roles.BDMMANAGER  )&& !isTabular && chartType === ChartTypeEnum.BAR">
                        <select class="form-control form-control-sm" aria-label="Default select example" name="select"
                            [ngModel]="xAxisFilter" (ngModelChange)="filterRecruiter($event); xAxisFilter = $event;">
                            <option selected value="ALL">ALL</option>
                            <option *ngFor="let r of xAxisFilterArray;" [ngValue]="r">{{r}}</option>
                        </select>
                    </div> -->

                    <!-- <div class="col-auto"
                        *ngIf="(role === roles.ADMIN || role === roles.RECRUITER || role === roles.BDMMANAGER  )&& isTabular">
                        <select class="form-control form-control-sm" aria-label="Default select example" name="select"
                            [ngModel]="xAxisFilter" (ngModelChange)="filterRecruiter($event); xAxisFilter = $event;">
                            <option selected value="ALL">ALL</option>
                            <option *ngFor="let r of xAxisCountryFilterArray;" [ngValue]="r">{{r}}</option>
                        </select>
                    </div>
                    -->

                    <!-- <div class="col-auto pt-1 ml-4" *ngIf="dateRangeSelected === allDateRange.CUSTOM">
                        <b>From</b> {{startDate}} <b> to </b> {{endDate}}
                    </div>
                    <div class="col-auto pr-0  pl-0">
                        <a class="chart-icon btn-link" (click)="openDateRangeModalNew()"
                            *ngIf="dateRangeSelected === allDateRange.CUSTOM">
                            <i class="fas fa-calendar-alt"></i>
                        </a>
                    </div> -->
                    <div class="col-auto">
                        <select class="form-control form-control-sm" aria-label="Default select example" name="select"
                            [ngModel]="dateRangeSelected" (ngModelChange)="dateRangeChangedInitial($event)">
                            <option *ngFor="let r of dateRangeKeys" value="{{allDateRange[r]}}">
                                {{allDateRange[r].replaceAll("-", " ") | titlecase}}</option>
                        </select>
                    </div>

                    <div>
                      <button class="btn btn-primary mr-2 ml-2" (click)="applyFilters()">Go</button>
                    </div>

                    <div class="col-auto text-right">

                        <ng-container *ngIf="!isTabular">
                            <a class="chart-icon btn-link mr-2" (click)="isTabular = true; filterOnTableRS(xAxisFilter, xAxisFilterCountry);"
                                *ngIf="show_tabular" title="Table View">
                                <i class="fas fa-table"></i>
                            </a>
                            <a class="chart-icon btn-link" *ngIf="chartType === ChartTypeEnum.LINE"
                                (click)="chartType = ChartTypeEnum.BAR; setBackground(); isTabular = false; filterRecruiterRS(xAxisFilter, xAxisFilterCountry);" title="Bar Graph">
                                <i class="fas fa-chart-bar"></i>
                            </a>
                            <a class="chart-icon btn-link" *ngIf="chartType !== ChartTypeEnum.LINE"
                                (click)="chartType = ChartTypeEnum.LINE; setBackground(); isTabular = false; filterRecruiterRS(xAxisFilter, xAxisFilterCountry);" title="Line Graph">
                                <i class="fas fa-chart-line"></i>
                            </a>
                        </ng-container>
                        <ng-container *ngIf="isTabular">
                            <a class="chart-icon btn-link mr-2"
                                (click)="chartType = ChartTypeEnum.BAR; setBackground(); isTabular = false; filterRecruiterRS(xAxisFilter,xAxisFilterCountry);" title="Bar Graph">
                                <i class="fas fa-chart-bar"></i>
                            </a>
                            <a class="chart-icon btn-link"
                                (click)="chartType = ChartTypeEnum.LINE; setBackground(); isTabular = false; filterRecruiterRS(xAxisFilter, xAxisFilterCountry);" title="Line Graph">
                                <i class="fas fa-chart-line"></i>
                            </a>
                        </ng-container>
                        <a class="chart-icon btn-link ml-2" (click)="downloadFile('recruiter_submission_summary')"
                            *ngIf="show_download" title="Download CSV">
                            <i class="fas fa-file-excel"></i>
                        </a>
                    </div>



                </div>
                <div class="col-auto text-right mr-5" *ngIf="dateRangeSelected === allDateRange.CUSTOM">
                  <b>From</b> {{startDate}} <b> to </b> {{endDate}}
                  <a class="chart-icon btn-link" (click)="openDateRangeModal()"
                      *ngIf="dateRangeSelected === allDateRange.CUSTOM">
                      <i class="fas fa-calendar-alt"></i>
                  </a>
                </div>
            </div>


        </div>
    </div>
    <div class="card-body pt-0 pb-0">
        <div class="row">
            <div class="col graph" *ngIf="!isTabular">
                <ng-container *ngIf="chartData.length > 0">
                    <ng-container *ngIf="isCompleted && chartType === ChartTypeEnum.BAR">
                        <canvas id="canvas" baseChart [datasets]="chartData" [labels]="chartLabels"
                            [options]="chartOptions" [legend]="true" [chartType]="ChartTypeEnum.BAR" [plugins]="[]">
                        </canvas>
                    </ng-container>
                    <ng-container *ngIf="isCompleted && chartType === ChartTypeEnum.LINE">
                        <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                            [legend]="true" [chartType]="ChartTypeEnum.LINE" [plugins]="[]">
                        </canvas>
                    </ng-container>
                </ng-container>
                <ng-container *ngIf="isCompleted && chartData.length === 0">
                    <div class="text-center text-muted">
                        No Data available currently.
                    </div>
                </ng-container>
            </div>
            <div class="col graph" *ngIf="isTabular">
                <div class="table-responsive">
                    <!-- <table class="table">
                        <tr>
                            <th>Stages</th>
                            <th *ngFor="let n of chartLabels">{{n}}</th>
                        </tr>
                        <tr *ngFor="let d of chartData">
                            <td>{{d.label}}</td>
                            <td *ngFor="let u of d.data">{{u}}</td>
                        </tr>
                    </table> -->
                    <!-- <table class="table">
                        <thead>
                        <tr>
                            <th>Candidate Name</th>
                            <th>Candidate Stage</th>
                            <th>Job Title</th>
                            <th>Total Experience</th>
                            <th>Salary ($)</th>
                            <th>Rate ($)</th>
                            <th>Client Name</th>
                            <th>Bdm Name</th>
                            <th>Location</th>
                            <th>Submission Date</th>
                            <th>Job Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let d of tabularData;">
                            <td>{{d.candidate_name ? d.candidate_name : '--'}}</td>
                            <td>{{d.status ? d.status : '--'}}</td>
                            <td>{{d.job_title ? d.job_title : '--'}}</td>
                            <td>{{d.total_experience ? d.total_experience : '--'}}</td>
                            <td>
                                <span *ngIf="d.min_salary && !d.max_salary">
                                    {{d.min_salary| currency:'USD'}}
                                </span>
                                <span *ngIf="!d.min_salary && d.max_salary">
                                    {{d.max_salary| currency:'USD'}}
                                </span>
                                <span *ngIf="d.min_salary && d.max_salary">
                                    {{d.min_salary| currency:'USD'}}-{{d.max_salary| currency:'USD'}}
                                </span>
                                <span *ngIf="!d.min_salary && !d.max_salary">
                                       --
                                </span>
                                </td>
                                <td>
                                    <span *ngIf="d.min_rate && !d.max_rate">
                                        {{d.min_rate| currency:'USD'}}
                                    </span>
                                    <span *ngIf="!d.min_rate && d.max_rate">
                                        {{d.max_rate| currency:'USD'}}
                                    </span>
                                    <span *ngIf="d.min_rate && d.max_rate">
                                        {{d.min_rate| currency:'USD'}}-{{d.max_rate| currency:'USD'}}
                                    </span>
                                    <span *ngIf="!d.min_rate && !d.max_rate">
                                           --
                                    </span>
                                    </td>
                            <td>{{d.client_name ? d.client_name : '--'}}</td>
                            <td>{{d.bdm_name ? d.bdm_name : '--'}}</td>
                            <td>{{d.location ? d.location : '--'}}</td>
                            <td>{{d.submission_date ? d.submission_date : '--'}}</td>
                            <td>{{d.job_date ? d.job_date : '--'}}</td>
                        </tr>
                    </tbody>
                    </table> -->
                    <!-- <div class="data-table table-responsive">
                        <table id="example" class="table table-striped table-bordered" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Candidate Name</th>
                                    <th>Candidate Stage</th>
                                    <th>Job Title</th>
                                    <th>Total Experience</th>
                                    <th>Salary ($)</th>
                                    <th>Rate ($)</th>
                                    <th>Client Name</th>
                                    <th>Bdm Name</th>
                                    <th>Location</th>
                                    <th>Submission Date</th>
                                    <th>Job Date</th>
                                </tr>
                            </thead>
                           <tbody>
                               <tr>
                                    <td>Anderson Cooper</td>
                                    <td>Submission</td>
                                    <td>Mamta Jewellers-Frontend Developer</td>
                                    <td>5Years</td>
                                    <td>$10,000-$15,000</td>
                                    <td>-</td>
                                    <td>Facebook</td>
                                    <td>Naresh</td>
                                    <td>93 Redwood Dr.
                                        Canandaigua, NY 14424</td>
                                    <td>2021-01-20</td>
                                    <td>2021-01-27</td>
                               </tr>



                           </tbody>
                            <tfoot>
                                <tr>
                                    <th>Candidate Name</th>
                                    <th>Candidate Stage</th>
                                    <th>Job Title</th>
                                    <th>Total Experience</th>
                                    <th>Salary ($)</th>
                                    <th>Rate ($)</th>
                                    <th>Client Name</th>
                                    <th>Bdm Name</th>
                                    <th>Location</th>
                                    <th>Submission Date</th>
                                    <th>Job Date</th>
                                </tr>
                            </tfoot>
                        </table>

                    </div> -->

                    <div class="example-header">
                        Page Size:
                        <select (change)="onPageSizeChanged()" id="page-size">
                            <option value="10" selected="">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="500">500</option>
                            <option value="1000">1000</option>
                        </select>
                    </div>

                    <ag-grid-angular style="width: 100%; height: 500px;" class="ag-theme-alpine"
                        [rowData]="tabularDataForFilter" [columnDefs]="columnDefs" pagination=true
                        paginationPageSize="10" (gridReady)="onGridReady($event)">
                    </ag-grid-angular>

                </div>
            </div>
        </div>
    </div>
</div>
